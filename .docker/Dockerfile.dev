FROM python:3.7

COPY . /app
WORKDIR /app

ARG FLASK_ENV
ENV FLASK_ENV ${FLASK_ENV}
ARG FLASK_PORT
ENV FLASK_PORT ${FLASK_PORT}


ARG MYSQL_DATABASE
ENV MYSQL_DATABASE ${MYSQL_DATABASE}
ARG MYSQL_USER
ENV MYSQL_USER ${MYSQL_USER}
ARG MYSQL_PASSWORD
ENV MYSQL_PASSWORD ${MYSQL_PASSWORD}


ENV MYSQL_ROOT_USER=root

ARG MYSQL_ROOT_PASSWORD
ENV MYSQL_ROOT_PASSWORD ${MYSQL_ROOT_PASSWORD}
ARG MYSQL_PORT
ENV MYSQL_PORT ${MYSQL_PORT}

ARG REACT_PORT
ENV REACT_PORT ${REACT_PORT}

ARG DB_HOST
ENV DB_HOST ${DB_HOST}

RUN pip install -r requirements.txt --no-cache-dir
EXPOSE ${FLASK_PORT}
CMD sh run_app_dev.sh
